{"ast":null,"code":"import TinderCard from'react-tinder-card';import{useEffect,useState}from'react';import{useCookies}from'react-cookie';import ChatContainer from'../component/ChatContainer';import axios from'axios';//import { dblClick } from \"@testing-library/user-event/dist/click\"\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=()=>{var _user$matches;const[user,setUser]=useState(null);const[Seekusers,setSeekusers]=useState(null);const[lastdirection,setLastDirection]=useState();const[cookies,setCookie,removeCookie]=useCookies(['user']);const userId=cookies.UserId;const getuser=async()=>{try{var _response$data;const response=await axios.get(\"http://localhost:8000/user\",{params:{userId}});setUser(response.data);await getSeekuser((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.seek);}catch(error){console.log(error);}};console.log(user);console.log(user===null||user===void 0?void 0:user.seek);const getSeekuser=async seek=>{try{const response=await axios.get('http://localhost:8000/seek-user',{params:{seeked:seek}});setSeekusers(response.data);}catch(error){console.log(error);}};//console.log(seeked)\nuseEffect(()=>{getuser();},[]);const updateMatches=async matchedUserId=>{try{await axios.put(\"http://localhost:8000/addmatch\",{userId,matchedUserId});getuser();}catch(error){console.log(error);}};const swiped=(direction,swipedUserId)=>{if(direction==='right'){updateMatches(swipedUserId);}setLastDirection(direction);};const outOfFrame=name=>{console.log(name+' left the screen!');};const matchedUserIds=user===null||user===void 0?void 0:(_user$matches=user.matches)===null||_user$matches===void 0?void 0:_user$matches.map(_ref=>{let{user_id}=_ref;return user_id;}).concat(userId);const filteredSeekedUser=(Seekusers===null||Seekusers===void 0?void 0:Seekusers.filter(character=>!matchedUserIds.includes(character.user_id)))||[];return/*#__PURE__*/_jsx(_Fragment,{children:user&&/*#__PURE__*/_jsxs(\"div\",{className:\"dash\",children:[/*#__PURE__*/_jsx(ChatContainer,{user:user}),/*#__PURE__*/_jsx(\"div\",{className:\"swipe-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-container\",children:[filteredSeekedUser===null||filteredSeekedUser===void 0?void 0:filteredSeekedUser.map(character=>/*#__PURE__*/_jsx(TinderCard,{className:\"swipe\",onSwipe:dir=>swiped(dir,character.user_id),onCardLeftScreen:()=>outOfFrame(character.first_name),children:/*#__PURE__*/_jsx(\"div\",{style:{backgroundImage:\"url(\"+character.url+\")\"},className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bottom-left\",children:[/*#__PURE__*/_jsx(\"p\",{children:character.first_name.charAt(0).toUpperCase()+character.first_name.slice(1)}),(character===null||character===void 0?void 0:character.haveproject)==='NO'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Skills: \",character.skills]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Interests: \",character.interests]})]}),(character===null||character===void 0?void 0:character.haveproject)==='YES'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Project Name: \",character.projectName]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Project Description: \",character.projectDescription]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Skills Required: \",character.skillRequired]})]})]})})},character.user_id)),/*#__PURE__*/_jsx(\"div\",{className:\"swipe-info\",children:lastdirection?/*#__PURE__*/_jsxs(\"p\",{children:[\"You Swiped \",lastdirection]}):/*#__PURE__*/_jsx(\"p\",{})})]})})]})});};export default Dashboard;","map":{"version":3,"names":["TinderCard","useEffect","useState","useCookies","ChatContainer","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_user$matches","user","setUser","Seekusers","setSeekusers","lastdirection","setLastDirection","cookies","setCookie","removeCookie","userId","UserId","getuser","_response$data","response","get","params","data","getSeekuser","seek","error","console","log","seeked","updateMatches","matchedUserId","put","swiped","direction","swipedUserId","outOfFrame","name","matchedUserIds","matches","map","_ref","user_id","concat","filteredSeekedUser","filter","character","includes","children","className","onSwipe","dir","onCardLeftScreen","first_name","style","backgroundImage","url","charAt","toUpperCase","slice","haveproject","skills","interests","projectName","projectDescription","skillRequired"],"sources":["C:/Users/cnb/coding_18march/project(happy deepali)/client/src/pages/Dashboard.js"],"sourcesContent":["import TinderCard from 'react-tinder-card'\r\nimport { useEffect, useState } from 'react'\r\nimport { useCookies } from 'react-cookie'\r\nimport ChatContainer from '../component/ChatContainer'\r\nimport axios from 'axios'\r\n//import { dblClick } from \"@testing-library/user-event/dist/click\"\r\n\r\n\r\nconst Dashboard =()=>{\r\n    \r\n    const[user,setUser] = useState(null)\r\n    const [Seekusers,setSeekusers]= useState(null)\r\n    const [lastdirection, setLastDirection]=useState()\r\n    const[cookies,setCookie,removeCookie]=useCookies(['user'])\r\n\r\n    const userId = cookies.UserId\r\n\r\n    \r\n\r\n    const getuser = async() =>{\r\n        try{\r\n            const response = await axios.get(`http://localhost:8000/user`, {\r\n                params: {userId}\r\n            })\r\n            setUser(response.data)\r\n            await getSeekuser(response.data?.seek)\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    console.log(user)\r\n    console.log(user?.seek)\r\n    const getSeekuser = async(seek) =>\r\n    {\r\n        try{\r\n            const response = await axios.get('http://localhost:8000/seek-user',{\r\n                params:{seeked: seek}\r\n            })\r\n            setSeekusers(response.data) \r\n        }catch(error)\r\n        {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    //console.log(seeked)\r\n    useEffect(()=>{\r\n        getuser()\r\n    },[])\r\n\r\n\r\n    const updateMatches = async(matchedUserId) =>\r\n    {\r\n        try{\r\n            await axios.put(`http://localhost:8000/addmatch`,{\r\n                userId,\r\n                matchedUserId\r\n            }) \r\n            getuser()\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    const swiped = (direction, swipedUserId) => {\r\n\r\n        if(direction === 'right')\r\n        {\r\n            updateMatches(swipedUserId)\r\n        }\r\n        setLastDirection(direction)\r\n    }\r\n\r\n    const outOfFrame = (name) => {\r\n        console.log(name + ' left the screen!')\r\n    }\r\n\r\n    const matchedUserIds = user?.matches?.map(({user_id})=> user_id).concat(userId)\r\n    const filteredSeekedUser = Seekusers?.filter(character => !matchedUserIds.includes(character.user_id)) || []\r\n\r\n    return (\r\n        <>\r\n        {user &&\r\n        <div className=\"dash\">\r\n            <ChatContainer user={user}/>\r\n            <div className=\"swipe-container\">\r\n            <div className=\"card-container\">\r\n            {filteredSeekedUser?.map((character) =>\r\n                <TinderCard\r\n                    className=\"swipe\"\r\n                    key={character.user_id }\r\n                    onSwipe={(dir) => swiped(dir, character.user_id)}\r\n                    onCardLeftScreen={() => outOfFrame(character.first_name)}>\r\n                    <div\r\n                        style={{backgroundImage: \"url(\" + character.url + \")\"}}\r\n                        className=\"card\">\r\n                        <div className=\"bottom-left\">\r\n                        <p>{character.first_name.charAt(0).toUpperCase() + character.first_name.slice(1)}</p>\r\n\r\n                        {character?.haveproject === 'NO' && (\r\n                            <div>\r\n                            <p>Skills: {character.skills}</p>\r\n                            <p>Interests: {character.interests}</p>\r\n                            </div>\r\n                        )}\r\n                        {character?.haveproject === 'YES' && (\r\n                            <div>\r\n                            <p>Project Name: {character.projectName}</p>\r\n                            <p>Project Description: {character.projectDescription}</p>\r\n                            <p>Skills Required: {character.skillRequired}</p>\r\n                            </div>\r\n                        )}\r\n                        </div>\r\n                        </div>\r\n                </TinderCard>\r\n            )}\r\n            <div className='swipe-info'>\r\n                {lastdirection ? <p>You Swiped {lastdirection}</p>:<p/>}\r\n            </div>\r\n            </div>\r\n            </div>\r\n        </div>}\r\n        </>\r\n    )\r\n}\r\nexport default Dashboard"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}