{"ast":null,"code":"import{useState}from\"react\";// axious is used to make http request  form broswer to node js\nimport axios from'axios';import{useNavigate}from'react-router-dom';import{useCookies}from'react-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const AuthModal=_ref=>{let{setShowModal,isSignUp}=_ref;const[email,setemail]=useState(null);const[password,setpassword]=useState(null);const[confirmPassword,setconfirmPassword]=useState(null);const[error,setError]=useState(null);const[cookies,setCookie,removeCookie]=useCookies(['user']);let navigate=useNavigate();console.log(email,password,confirmPassword);const handleClick=()=>{setShowModal(false);};// async function complete his task without blocking excution of program\nconst handlesubmit=async e=>{e.preventDefault();try{if(isSignUp&&password!==confirmPassword){setError('Password need to match!');return;}console.log('posting',email,password);const response=await axios.post(\"http://localhost:8000/\".concat(isSignUp?'signup':'login'),{email,password});setCookie('Authtoken',response.data.token);setCookie('UserId',response.data.userId);const sucess=response.status===201;if(sucess&&isSignUp)navigate('/onboard');if(sucess&&!isSignUp)navigate('/dashboard');window.location.reload();}catch(error){console.log(error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"close-icon\",onClick:handleClick,children:\"X\"}),/*#__PURE__*/_jsx(\"h2\",{children:isSignUp?'CREATE ACCOUNT':'LOG IN'}),/*#__PURE__*/_jsx(\"p\",{children:\"By clicking Log In, you agree to our terms. Learn how we process your data in our Privacy Policy and Cookie Policy\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlesubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",placeholder:\"email\",required:true,onChange:e=>setemail(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"password\",required:true,onChange:e=>setpassword(e.target.value)}),isSignUp&&/*#__PURE__*/_jsx(\"input\",{type:\"password-check\",id:\"password-check\",name:\"password-check\",placeholder:\"confirm password\",required:true,onChange:e=>setconfirmPassword(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{className:\"secondary-button\",type:\"submit\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"GET THE APP\"})]});};export default AuthModal;","map":{"version":3,"names":["useState","axios","useNavigate","useCookies","jsx","_jsx","jsxs","_jsxs","AuthModal","_ref","setShowModal","isSignUp","email","setemail","password","setpassword","confirmPassword","setconfirmPassword","error","setError","cookies","setCookie","removeCookie","navigate","console","log","handleClick","handlesubmit","e","preventDefault","response","post","concat","data","token","userId","sucess","status","window","location","reload","className","children","onClick","onSubmit","type","id","name","placeholder","required","onChange","target","value"],"sources":["C:/Users/cnb/coding_18march/project(happy deepali)/client/src/component/AuthModal.js"],"sourcesContent":["import { useState } from \"react\"\r\n// axious is used to make http request  form broswer to node js\r\nimport axios from 'axios'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useCookies } from 'react-cookie'\r\n\r\nconst AuthModal = ({ setShowModal,isSignUp}) => {\r\n\r\n    const [email, setemail]= useState(null)\r\n    const [password,setpassword]= useState(null)\r\n    const [confirmPassword, setconfirmPassword]= useState(null)\r\n    const [error, setError]=useState(null)\r\n    const [ cookies, setCookie, removeCookie] = useCookies(['user'])\r\n\r\n    let navigate=useNavigate()\r\n\r\n    console.log(email,password,confirmPassword)\r\n    const handleClick = () => {\r\n        setShowModal(false)\r\n    }\r\n// async function complete his task without blocking excution of program\r\n    const handlesubmit = async(e) =>\r\n    {\r\n        e.preventDefault()\r\n        try{\r\n            if( isSignUp && (password !== confirmPassword)){\r\n                setError('Password need to match!')\r\n                return\r\n            }\r\n            console.log('posting',email,password)\r\n            const response = await axios.post(`http://localhost:8000/${isSignUp ? 'signup' : 'login'}`, {email, password })\r\n            \r\n            setCookie('Authtoken', response.data.token)\r\n            setCookie('UserId', response.data.userId)\r\n        \r\n        const sucess = response.status === 201\r\n\r\n        if (sucess && isSignUp) navigate('/onboard');\r\n        if (sucess && !isSignUp) navigate('/dashboard');\r\n        window.location.reload()\r\n        }\r\n        catch(error)\r\n        {\r\n            console.log(error)\r\n        }\r\n    }\r\n    return (\r\n\r\n        <div className=\"auth-modal\">\r\n            <div className=\"close-icon\" onClick={handleClick}>X</div>\r\n\r\n            <h2>{isSignUp ? 'CREATE ACCOUNT' : 'LOG IN'}</h2>\r\n            <p>By clicking Log In, you agree to our terms. Learn how we process your data in our Privacy Policy and Cookie Policy</p>\r\n\r\n            <form onSubmit={handlesubmit}>\r\n                <input\r\n                    type=\"email\"\r\n                    id=\"email\"\r\n                    name=\"email\"\r\n                    placeholder=\"email\"\r\n                    required={true}\r\n                    onChange={(e)=> setemail(e.target.value)}\r\n                />\r\n                <input\r\n                    type=\"password\"\r\n                    id=\"password\"\r\n                    name=\"password\"\r\n                    placeholder=\"password\"\r\n                    required={true}\r\n                    onChange={(e)=> setpassword(e.target.value)}\r\n                />\r\n                {isSignUp && <input\r\n                    type=\"password-check\"\r\n                    id=\"password-check\"\r\n                    name=\"password-check\"\r\n                    placeholder=\"confirm password\"\r\n                    required={true}\r\n                    onChange={(e)=> setconfirmPassword(e.target.value)}\r\n                />}\r\n                <input className=\"secondary-button\" type=\"submit\"/>\r\n                <p>{error}</p>\r\n            </form>\r\n            <hr/>\r\n            <h2>GET THE APP</h2>\r\n        </div>\r\n    )\r\n}\r\nexport default AuthModal"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}